

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; gromacs-2019-CWBSol  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> gromacs-2019-CWBSol
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Overview</a></li>
<li><a class="reference internal" href="#theory">Theory</a></li>
<li><a class="reference internal" href="#installation-guide">Installation guide</a></li>
<li><a class="reference internal" href="#a-step-by-step-guide-of-running-rismhi3d">A step-by-step guide of running RISMHI3D</a><ul>
<li><a class="reference internal" href="#step-1-prepare-the-solvent-setting-file">Step 1. prepare the solvent setting file</a></li>
<li><a class="reference internal" href="#step-2-prepare-the-solute-conformation-file">Step 2. prepare the solute conformation file</a></li>
<li><a class="reference internal" href="#step-3-prepare-the-solute-forcefield-file">Step 3. prepare the solute forcefield file</a></li>
<li><a class="reference internal" href="#step-4-run-the-3drimshi">Step 4. Run the 3DRIMSHI</a></li>
</ul>
</li>
<li><a class="reference internal" href="#input-and-output">Input and output</a><ul>
<li><a class="reference internal" href="#input-solvent-setting-file">Input: Solvent setting file</a></li>
<li><a class="reference internal" href="#input-solute-forcefield">Input: Solute forcefield</a></li>
<li><a class="reference internal" href="#input-solute-conformation-s">Input: Solute conformation(s)</a></li>
<li><a class="reference internal" href="#output-screen-report">Output: screen report</a></li>
<li><a class="reference internal" href="#output-ts4s-file">Output: TS4S file</a></li>
<li><a class="reference internal" href="#output-rdf-file">Output: RDF file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters-options-and-commands">Parameters, options and commands</a><ul>
<li><a class="reference internal" href="#parameters-for-running">Parameters for running</a></li>
<li><a class="reference internal" href="#commands-and-command-queue">Commands and command queue</a></li>
<li><a class="reference internal" href="#other-options">Other options</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gromacs-2019-CWBSol</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/rismhi3d-user-manuel_1.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>Version 0.243, (c) Siqin Cao</p>
<div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>The RISMHI3D is a software package of solvent structure calculation.
Based on the</p>
<p>is based on the integration equation theory (IET) [cite] of liquid, the
hydrophobicity induced density inhomogeneity (HI) theory [cite] and</p>
<p>The RISMHI3D can perform the following calculations:</p>
</div>
<div class="section" id="theory">
<h1>Theory<a class="headerlink" href="#theory" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="installation-guide">
<h1>Installation guide<a class="headerlink" href="#installation-guide" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="a-step-by-step-guide-of-running-rismhi3d">
<h1>A step-by-step guide of running RISMHI3D<a class="headerlink" href="#a-step-by-step-guide-of-running-rismhi3d" title="Permalink to this headline">¶</a></h1>
<div class="section" id="step-1-prepare-the-solvent-setting-file">
<h2>Step 1. prepare the solvent setting file<a class="headerlink" href="#step-1-prepare-the-solvent-setting-file" title="Permalink to this headline">¶</a></h2>
<p>To run the RISMHI3D to calculate the solvent distributions around given
solutes, three input files are required: the solvent setting file, the
solute forcefield file, and the solute conformations. Some solvent
setting file can be found in the software library; and if our library
doesn’t have your solvent, please generate a new solvent setting file
according to Sec. [sec:io.solvent].</p>
<p>Now suppose you have <code class="docutils literal notranslate"><span class="pre">tip3p.gaff</span></code> in <code class="docutils literal notranslate"><span class="pre">$IETLIB</span></code> folder.</p>
</div>
<div class="section" id="step-2-prepare-the-solute-conformation-file">
<h2>Step 2. prepare the solute conformation file<a class="headerlink" href="#step-2-prepare-the-solute-conformation-file" title="Permalink to this headline">¶</a></h2>
<p>Then you need to find the file of solute conformation(s). This can be in
either PDB, GRO or XTC format (see Sec. [sec:io.traj] for details). The
conformation(s) should not contain any solvent of the kind that you want
to perform RISMHI3D for. The solute is not required to be electrically
neutralized.</p>
<p>Now suppose you have <code class="docutils literal notranslate"><span class="pre">rcsb.pdb</span></code> downloaded from RCSB, which may not be
compatible with RISMHI3D. There are two ways to change it to the
RISMHI3D compatible format. In the first way, you can do it youself by
keeping only the lines that begin with “ATOM”, and add one line to
define the box vector (suppose the box is
<span class="math notranslate nohighlight">\(100\times 110\times 120 {\rm\AA}^3\)</span>, and please ignore the rulers
in gray texts):</p>
<p><code class="docutils literal notranslate"><span class="pre">|——–+———+———+———+———+———+———|</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">CRYST1</span><span class="pre">100.000</span><span class="pre">110.000</span><span class="pre">120.000</span><span class="pre">90.00</span><span class="pre">90.00</span><span class="pre">90.00</span><span class="pre">P</span><span class="pre">1</span><span class="pre">1</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">|——–+———+———+———+———+———+———|</span></code></p>
</div>
<div class="section" id="step-3-prepare-the-solute-forcefield-file">
<h2>Step 3. prepare the solute forcefield file<a class="headerlink" href="#step-3-prepare-the-solute-forcefield-file" title="Permalink to this headline">¶</a></h2>
<p>Then you need to prepare the solute forcefield file for this solute. The
solute forcefield file can be generated with the GROMACS top file (see
Sec. [sec:io.solute]), so before you can first generate the top file.
This can be done with either the GROMACS package or AMBER Tools and
ACPype. If you have GROMACS:</p>
<p><code class="docutils literal notranslate"><span class="pre">gmx</span> <span class="pre">pdb2gmx</span> <span class="pre">-f</span> <span class="pre">rcsb.pdb</span> <span class="pre">-o</span> <span class="pre">solute.pdb</span> <span class="pre">-p</span> <span class="pre">solute.top</span></code></p>
<p>or if you have both AMBER Tools and ACPype:</p>
<p><code class="docutils literal notranslate"><span class="pre">antechamber</span> <span class="pre">-i</span> <span class="pre">solute.pdb</span> <span class="pre">-fi</span> <span class="pre">pdb</span> <span class="pre">-o</span> <span class="pre">solute.mol2</span> <span class="pre">-fo</span> <span class="pre">mol2</span> <span class="pre">-s</span> <span class="pre">2</span> <span class="pre">-c</span> <span class="pre">bcc</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">acpype.py</span> <span class="pre">-i</span> <span class="pre">solute.mol2</span> <span class="pre">-c</span> <span class="pre">user</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">solute.acpype/solute_GMX.top</span> <span class="pre">solute.top</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">solute.acpype/solute_GMX.pdb</span> <span class="pre">solute.pdb</span></code></p>
<p>Then, the solute forcefield file <code class="docutils literal notranslate"><span class="pre">soltue.ff</span></code> can be generated with the
following commands:</p>
<p><code class="docutils literal notranslate"><span class="pre">GMXDATA=/opt/gromacs/share</span> <span class="pre">gmxtop2solute</span> <span class="pre">-top</span> <span class="pre">solute.top</span> <span class="pre">-o</span> <span class="pre">solute.ff</span></code></p>
<p>or</p>
<p><code class="docutils literal notranslate"><span class="pre">gmxtop2solute</span> <span class="pre">-top</span> <span class="pre">solute.top</span> <span class="pre">-ffpath</span> <span class="pre">/opt/gromacs/share/gromacs/top</span> <span class="pre">-o</span> <span class="pre">solute.ff</span></code></p>
<p>(Please note that the atoms in the solute conformation file should be
exactly the same as in the solute forcefield file.)</p>
</div>
<div class="section" id="step-4-run-the-3drimshi">
<h2>Step 4. Run the 3DRIMSHI<a class="headerlink" href="#step-4-run-the-3drimshi" title="Permalink to this headline">¶</a></h2>
<p>A simple run of RISMHI3D is shown as below, the 3DRISM-KH calculation of
the TIP3P water around a solute molecule defined in output.ff and
output.pdb:</p>
<p><code class="docutils literal notranslate"><span class="pre">rismhi3d</span> <span class="pre">-p</span> <span class="pre">$IETLIB/tip3p.gaff</span> <span class="pre">-s</span> <span class="pre">solute.ff</span> <span class="pre">-f</span> <span class="pre">solute.pdb</span> <span class="pre">-nr</span> <span class="pre">100x110x120</span> <span class="pre">-rc</span> <span class="pre">1.2</span> <span class="pre">-do-rism-kh</span> <span class="pre">-step</span> <span class="pre">200</span> <span class="pre">-o</span> <span class="pre">output</span> <span class="pre">-rdf-grps</span> <span class="pre">2-1,2-2,9-1,9-2,19-1,19-2</span> <span class="pre">-rdf-bins</span> <span class="pre">60</span></code></p>
<p>For advanced users: the above command is equivalent to the following
command:</p>
<p><code class="docutils literal notranslate"><span class="pre">rismhi3d</span> <span class="pre">-p</span> <span class="pre">$IETLIB/tip3p.gaff</span> <span class="pre">-s</span> <span class="pre">solute.ff</span> <span class="pre">-f</span> <span class="pre">solute.pdb</span> <span class="pre">-nr</span> <span class="pre">100x110x120</span> <span class="pre">-rc</span> <span class="pre">1.2</span> <span class="pre">-cmd</span> <span class="pre">closure=kh</span> <span class="pre">rism</span> <span class="pre">report:energy</span> <span class="pre">display:rdf</span> <span class="pre">savee:cmd,guv</span> <span class="pre">-step</span> <span class="pre">200</span> <span class="pre">-o</span> <span class="pre">output</span> <span class="pre">-rdf-grps</span> <span class="pre">2-1,2-2,9-1,9-2,19-1,19-2</span> <span class="pre">-rdf-bins</span> <span class="pre">60</span></code></p>
<p>(the green text are optional parameters and commands)</p>
<p><img alt="The screen output of running 3DRISMHI on alanine dipeptide" src="rismhi3d-demo-screen.png" />
[fig:demo-screen]</p>
<p>The screen output can be seen in Fig. [fig:demo-screen]. At the same
time, a file <code class="docutils literal notranslate"><span class="pre">output.ts4s</span></code> containing the command, density
distributions and the HI density distributions is generated in the
current folder. This file can be decoded with <code class="docutils literal notranslate"><span class="pre">ts4sdump</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">ts4sdump</span> <span class="pre">output.ts4s</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ts4sdump</span> <span class="pre">-e</span> <span class="pre">2</span> <span class="pre">output.ts4s</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ts4sdump</span> <span class="pre">-d</span> <span class="pre">2</span> <span class="pre">output.ts4s</span></code></p>
<p>For hydrophobic solutes, the HI is suggested to be performed. For the
above example, the 3DRISM-HI-D2MSA calculation can be performed with the
following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">rismhi3d</span> <span class="pre">-p</span> <span class="pre">$IETLIB/tip3p.gaff</span> <span class="pre">-s</span> <span class="pre">solute.ff</span> <span class="pre">-f</span> <span class="pre">solute.pdb</span> <span class="pre">-nr</span> <span class="pre">100x110x120</span> <span class="pre">-rc</span> <span class="pre">1.2</span> <span class="pre">-do-rismhi-d2</span> <span class="pre">-step</span> <span class="pre">200</span> <span class="pre">-o</span> <span class="pre">output</span> <span class="pre">-rdf-grps</span> <span class="pre">2-1,2-2,9-1,9-2,19-1,19-2</span> <span class="pre">-rdf-bins</span> <span class="pre">60</span></code></p>
<p>Again, for advanced users: this command is equivalent to the following
command:</p>
<p><code class="docutils literal notranslate"><span class="pre">rismhi3d</span> <span class="pre">-p</span> <span class="pre">$IETLIB/tip3p.gaff</span> <span class="pre">-s</span> <span class="pre">solute.ff</span> <span class="pre">-f</span> <span class="pre">solute.pdb</span> <span class="pre">-nr</span> <span class="pre">100x110x120</span> <span class="pre">-rc</span> <span class="pre">1.2</span> <span class="pre">-cmd</span> <span class="pre">hshi</span> <span class="pre">closure=d2</span> <span class="pre">rism</span> <span class="pre">report:energy</span> <span class="pre">display:rdf</span> <span class="pre">savee:cmd,guv</span> <span class="pre">-step</span> <span class="pre">200</span> <span class="pre">-o</span> <span class="pre">output</span> <span class="pre">-rdf-grps</span> <span class="pre">2-1,2-2,9-1,9-2,19-1,19-2</span> <span class="pre">-rdf-bins</span> <span class="pre">60</span></code></p>
</div>
</div>
<div class="section" id="input-and-output">
<h1>Input and output<a class="headerlink" href="#input-and-output" title="Permalink to this headline">¶</a></h1>
<p>RISMHI3D work with three input files and some options. The three input
files are:</p>
<ul class="simple">
<li><p>Solvent settings (-p, -solvent, see Sec. [sec:io.solvent]): the
information of te solvent</p></li>
<li><p>Solute forcefield (-s, -solute, see Sec. [sec:io.solute]): forcefield
parameters of the solute</p></li>
<li><p>Solute conformation(s) (-f, -traj, see Sec. [sec:io.traj]): the
atomic structure of solute molecules</p></li>
<li><p>Parameters, options and commands (see Sec. [sec:param]): commands to
run, number of grids, number of threads, etc.</p></li>
</ul>
<p>The output of RISMHI3D consists of screen outputs, TS4S outputs and RDF
outputs:</p>
<ul class="simple">
<li><p>Screen outputs (see Sec. [sec:io.screen]): brief reports and debug
information</p></li>
<li><p>TS4S files (see Sec. [sec:io.ts4s]): results in the grid space</p></li>
<li><p>RDF file (see Sec. [sec:io.rdf]): text file containing the
user-defined RDF pairs</p></li>
</ul>
<p>By default, only a few screen output will be generated. More details of
screen output, TS4S or RDF output will be shown by enabling options or
commands (see Sec. [sec:param])</p>
<div class="section" id="input-solvent-setting-file">
<h2>Input: Solvent setting file<a class="headerlink" href="#input-solvent-setting-file" title="Permalink to this headline">¶</a></h2>
<p>The solvent setting file is specified with -p or -solvent. If the
current folder doesn’t have the solvent setting file, the program will
search for the path defined in $IETLIB. Normally the filename should not
begin with “-”, and if you do have such a file, use “<code class="docutils literal notranslate"><span class="pre">–</span></code>” before
the filename (e.g. <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">–</span> <span class="pre">-solvent_settings.gaff</span></code>)</p>
<p>The solvent setting file contains several sections: [solvent], [atom],
[bond], and [gvv_map] ([gvv_map] is optional).</p>
<p>The <strong>[solvent]</strong> section mainly contains the following parameters:</p>
<ul class="simple">
<li><p><strong>ff</strong>: the forcefield type specifier, can be: gaff/amber/opls. The
mixing rule of VdW radiuses are arithmetic (-arith-sigma) in
gaff/amber or geometric (-geo-sigma) in opls. The energy unit is
kJ/mol (-Tdef 120.27) in gaff/opls or kcal/mol (-Tdef 502.97) in
amber.</p></li>
<li><p><strong>rvdw, rcoul, rc</strong>: the cutoff distance (in nm) for the
interactions. -rc will specify the cutoff for both -rcoul and -rvdw.
The LJ interaction is calculated at a hard cutoff at -rvdw, while the
Coulomb interaction can be calculated with either a PME swithed at
-rcoul (if PME is enabled with -pme) or a hard cutoff at -rcoul (if
PME is disabled by -nopme)</p></li>
<li><p><strong>density</strong> and <strong>bulk-density</strong>: a list of the densities or bulk
densities of all solvent components. The unit is nm<span class="math notranslate nohighlight">\(^{-3}\)</span>.
The bulk densities are the pure liquid densities of each solvent
component.</p></li>
<li><p><strong>gvv</strong>: the solvent-solvent correlations. <strong>gvv</strong> is followed by the
name of gvv file and the grid size, e.g. “-gvv 0.001 tip3p.gvv” or
“-gvv tip3p.gvv 0.001” means that the gvv is defined in tip3p.gvv
with the grid size of 0.001 nm. The gvv file contains a number of
columns, each column is the correlation function of certain pair of
solvent sites. The mapping between columns and solvent site pairs are
defined by [gvv_map] section or in a default order (if [gvv_map]
section is missing). The real mapping of gvv can be seen when running
the program with “-list” option.</p></li>
<li><p><strong>zeta</strong>: the solvent-solvent zeta correlations, only used in HI
calculations. The definition of zeta is similar to gvv, while the
only difference is the unit of zeta is energy. zeta has no mapping
between columns and molecule pairs, and should contain
N<span class="math notranslate nohighlight">\(\times\)</span>N columns for N solvent molecules.</p></li>
<li><p><strong>dielect</strong> or <strong>dipole</strong>: a list of dielectric constants (vacuum is
1) or dipole moments (unit is <span class="math notranslate nohighlight">\(\rm e\cdot nm\)</span>) of all
molecules. The dielectric constants and dipole moments are optional
and only used in certain algorithms (e.g. -Coulomb dielect, see Sec.
[sec:param] for details)</p></li>
</ul>
<p>The <strong>[atom]</strong> section defines all the atoms. The [atom] section
consists seven columns (more columns are ignored), separated by spaces
or tabs:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>1</p></td>
<td><p>atom name</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>moleucle name</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>index</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>group index</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>charge</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>sigma (nm)</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>epsilon</p></td>
</tr>
</tbody>
</table>
<p>The group index is the site index, and the atoms with the same group (or
site) index can be treated as one site in RISM calculation. It is highly
suggested that completely equivalent atoms are grouped into one site,
which will greatly reduce the computational cost.</p>
<p>The <strong>[bond]</strong> section defines the bonds and pairs of each pair of
atoms. The <strong>[bond]</strong> section consists of three or four columes, where
the first two columns are the two atoms, and the third column is the
bond length or fixed pair distance between the pair of atoms (unit: nm).
The fourth column is the RMSD of the fluctuations of bond lengths (or
pair distances), which is optional and will be treated as <span class="math notranslate nohighlight">\(0\)</span> if
the fourth column is missing. Warning: don’t define one bond/pair twice.</p>
</div>
<div class="section" id="input-solute-forcefield">
<h2>Input: Solute forcefield<a class="headerlink" href="#input-solute-forcefield" title="Permalink to this headline">¶</a></h2>
<p>The solute forcefield file is specified with -s or -solute. This file
contains only <strong>[solute]</strong> section(s). The <strong>[solute]</strong> section contains
six or eight (more column are ignored) columns:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 39%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>column</p></th>
<th class="head"><p>6-col format</p></th>
<th class="head"><p>8-col format</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>atom name</p></td>
<td><p>atom index</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>moleucle name</p></td>
<td><p>atom name</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>atom mass</p></td>
<td><p>residue id</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>partial charge</p></td>
<td><p>moleucle name</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>sigma (nm)</p></td>
<td><p>atom mass</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>epsilon</p></td>
<td><p>partial charge</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td></td>
<td><p>sigma (nm)</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td></td>
<td><p>epsilon</p></td>
</tr>
</tbody>
</table>
<p>The solute forcefield can be simply translated from the GROMACS top file
with the “gmxtop2solute” tool provided in the software package.</p>
</div>
<div class="section" id="input-solute-conformation-s">
<h2>Input: Solute conformation(s)<a class="headerlink" href="#input-solute-conformation-s" title="Permalink to this headline">¶</a></h2>
<p>The solute conformation(s) are defined in the trajectory file, specified
with -f or -traj. The trajectory file can be a PDB, GRO or XTC file.</p>
<p>The PDB file: only lines begin with “ATOM” or “CRYST1” will be
processed. The number of atoms defined by the ATOM lines should be
consistent with the solute forcefield file. The box size should be
defined with a CRYST1 line. The PDB file can contain multiple frames,
separated by “ENDMDL”.</p>
<p>The GRO file can also contain multiple frames.</p>
<p>The XTC file can be processed only when the software is compiled with
_GROMACS_ options. It’s fine to turn off all _GROMACS_ flags when
compling the software, as long as you don’t have GROMACS or don’t want
to be bothered by this feature. The frames of XTC between the time (in
ps) defined in <strong>-b</strong> and <strong>-e</strong> are handled, and <strong>-dt</strong> specifies the
time interval between frames that handled in RISMHI3D.</p>
</div>
<div class="section" id="output-screen-report">
<h2>Output: screen report<a class="headerlink" href="#output-screen-report" title="Permalink to this headline">¶</a></h2>
<p>The screen output consists of the information of running and some brief
reports of calculation results.</p>
<p>The running information can be muted with <strong>-v 0</strong>. If you want to
monitor the status of running, please use <strong>-v 1</strong>, <strong>-v 2</strong> or simply
<strong>-v</strong>.</p>
<p>More running information is shown in debug mode. <strong>-debug 0</strong> will mute
all debug message, and <strong>-debug 1</strong> will allow to show some important
messages (e.g. real location of input files, allocated memory, thread,
etc.). In <strong>-debug 2</strong>, a detailed running process is printed on screen,
including calling of major functions in the source code. Further in
<strong>-debug 3</strong> or <strong>-debug-crc</strong>, the CRC check sum of important memory
bulks will be displayed on the screen. Please note that -debug 3 or
-debug-crc will perform the CRC calculation, which will require
additional computing time.</p>
<p>A detail report of time consumption will be displayed at the end with
<strong>-v 2</strong> or <strong>-debug 1/2/3</strong>.</p>
<p>The brief reports of calculation results will be displayed according to
the command defined in the command queue. Please see Sec. [sec:param]
for details of commands and the command queue. For example, if you want
a detailed report of energy or correlation functions, you need to add a
“-cmd report:energy” or “-cmd report:cuv” command; if you want to show
the rdf, you need to add a “-cmd display:rdf” command.</p>
<p>The screen output can be redirected to a log file specified with
<strong>-log</strong> (<strong>-log screen</strong>, <strong>-log stdout</strong> and <strong>-log stderr</strong> will
redirect the screen output to stdout or stderr).</p>
</div>
<div class="section" id="output-ts4s-file">
<h2>Output: TS4S file<a class="headerlink" href="#output-ts4s-file" title="Permalink to this headline">¶</a></h2>
<p>The TS4S file contains one or more frames of 4D tensors. Normally in
RISMHI3D, the 4D tensors can be LJ potentials, Coulomb potentials, total
correlation, direct correlation, total density profile and HI density.</p>
<p>The name of the output TS4S file is specified with <strong>-o[v][0/1/2]</strong> or
<strong>-a[0/1/2]</strong>, where “ov” represepts overriding, and “a” represents
appending. The TS4S data can be uncompressed (<strong>-o[v]0</strong> or <strong>-a0</strong>) or
compressed with ZLIB (if you compiled with the _ZLIB_ option). Please
note that the TS4S file may be extrodinarily huge, and the
<strong>-significant-digits</strong> or <strong>-sd</strong> option may be helpful for higher
compressibility with lower accuracy of output data (e.g. <strong>-sd 5</strong> will
keep only five significant digits, and <strong>-sd float</strong> will trim all
output data to float).</p>
<p>The output of TS4S will be performed with the “save” command defined in
the command queue (see Sec. [sec:param] for details). The TS4S file will
be generated at the first saving command. The filename extension of TS4S
is always “.ts4s”. If the filename is not specified, a default filename
solute.solvent.YYMMDD_HHMM.ts4s will be used.</p>
<p>Please use “ts4sdump” (provided in the software package) to check and
decode the TS4S file.</p>
<p><em>(For developer:) The file format of a TS4S file is defined in
compress.cpp of the source code. TS4S consists a number of data blocks,
each block corresponding to a 4D tensor. One 4D tensor block begins with
the IETSPageHeader structure, followed by comment text and tensor data.
The decoded 4D tensors are organized in the order of
“tensor[solvent_site][z][y][x]”.</em></p>
</div>
<div class="section" id="output-rdf-file">
<h2>Output: RDF file<a class="headerlink" href="#output-rdf-file" title="Permalink to this headline">¶</a></h2>
<p>The RDF can be calculated and displayed or written to a text file. The
RDF groups are defined in “<strong>-rdf-grps</strong> u1-v1,u1-v2,…”, where u1, u2
… stand for the indexes of solute atoms and v1, v2 … stand for the
indexes of solvent sites. The number of RDF bins is defined in
“<strong>-rdf-bins</strong> 50”, where 50 is the default bin number. The RDF will be
performed up to the distance defined in “<strong>-rc</strong>”. For an advanced user
who wants to see the RDFs of HI densities or direct correlations, the
“<strong>-rdf-content</strong>” option can be used to specify the RDF to calculate:
rdf (density profile, by default), h (direct correlation), dd (HI
density), c (direct correlation), ch (ch=:math:<cite>c*h</cite>), lj (LJ potential)
or coul (Coulomb potential).</p>
<p>The displaying or saving of RDF is performed in “-cmd display:rdf” or
“-cmd save:rdf”. The RDF is calculated when necessary, so no RDF
calculation will be performed if the RDF is not displayed or saved.
“-cmd display:rdf” will display the RDF on screen (or -log file), while
“-cmd save:rdf” will save the RDF to a text file. The name of the RDF
file begins with the name of TS4S file, and ended with a “.rdf”
extension.</p>
</div>
</div>
<div class="section" id="parameters-options-and-commands">
<h1>Parameters, options and commands<a class="headerlink" href="#parameters-options-and-commands" title="Permalink to this headline">¶</a></h1>
<div class="section" id="parameters-for-running">
<h2>Parameters for running<a class="headerlink" href="#parameters-for-running" title="Permalink to this headline">¶</a></h2>
<p>In the command line parameters, you can specify the running parameters,
tell the software what to compute and display, and override some solvent
settings. (Please note that all the settings in the <strong>[solvent]</strong>
section can be overridden by the command line parameters.) Here is a
list of the major parameters for running:</p>
<ul class="simple">
<li><p><strong>-nt</strong> and <strong>-np</strong>: number of parallel runnings. -np 1 or -nt 1 will
disable the paralleling. <strong>-nt</strong> will use multithread while <strong>-np</strong>
will use fork. Please note that paralleling is still possible (with
-np) even if you hate or don’t have pthread. <strong>-np</strong> is enabled with
_LOCALPARALLEL_ option in compiling, while <strong>-nt</strong> requires both
_LOCALPARALLEL_ and _LOCALPARALLEL_PTHREAD_ in compiling. Note:
the RISMHI3D will automatically set -nt to the maximum number of your
CPU cores. So don’t forget to change -nt or -np if you are running
RISMHI3D on a cluster.</p></li>
<li><p><strong>-nice</strong>: the nice level of running this software.</p></li>
<li><p><a href="#id1"><span class="problematic" id="id2">**</span></a>-nr <a href="#id3"><span class="problematic" id="id4">**</span></a>: the grid number. It can be one number for both three
dimensions; three numbers for X, Y and Z respectively; or NXxNYxNZ.
e.g. “-nr 50” is equivalent to “-nr 50 50 50” and “-nr 50x50x50”. The
grids of X, Y and Z can be different, e.g. “-nr 50x60x70”. The grid
numbers are suggested to be even numbers.</p></li>
<li><p><strong>-step</strong> 100: set the maximum steps for HI and RISM.</p></li>
<li><p><strong>-interact</strong>: enable the interactive mode. Pressing enter at running
will halt the calculation, and you can print the report, change
parameters, continue running, end current RISM/HI calculation or
quite the program. Warning: don’t enable the interactive mode when
you are running RISMHI3D in background (e.g. nohup or on a cluster).</p></li>
<li><p><strong>-do-rism-kh</strong>, <strong>-do-rismhi-kh</strong> and <strong>-do-rismhi-d2</strong>: perform
3DRISM or 3DRISMHI with the KH or D2MSA closures. The RDFs will be
displayed on screen if <strong>-rdf-grps</strong> are defined, while a TS4S file
containing the running command and the density profile will be
generated if the output file is specified.</p></li>
<li><p><strong>-cmd</strong> or <strong>-do</strong>: the command(s) you want to run. The software
will do nothing if the command queue is empty. See Sec.
[sec:param.command] for details.</p></li>
</ul>
<p>And here is a list of some important <strong>[solvent]</strong> settings that can be
redefined:</p>
<ul class="simple">
<li><p><strong>-temperature</strong> 298: specify the temperature in Kelvin</p></li>
<li><p><strong>-Tdef</strong> 120.27: specify the temperature of defining the energy
unit. 1 kJ/mol = 120.27 K, 1 kcal/mol = 502.97 K. Can be specified
with <strong>-ff</strong>.</p></li>
<li><p><strong>-arith-sigma</strong> and <strong>-geo-sigma</strong>: set the combing rule of VdW
raiuds to arithmetic or geometric averaging.</p></li>
<li><p><strong>-density</strong> and <strong>-bulk-density</strong> can be redefined in the command
line parameters.</p></li>
<li><p><strong>-ndiis</strong>, <strong>-ndiisrism</strong> and <strong>-ndiishi</strong>: the maximum steps of
DIIS. More steps of DIIS will have better convergence of
self-consistent-field iterations while require more memory.</p></li>
<li><p><strong>-delvv</strong>, <strong>-delrism</strong> and <strong>-delhi</strong>: the step in factor of the
self-consistent-field iterations. <strong>-delvv</strong> for both RISM and HI.
Both are 1 by default, and 0.7 is recommended by RISM [cite].</p></li>
<li><p><strong>-errtol</strong>, <strong>-errtolrism</strong> and <strong>-errtolhi</strong>: the error tolerance
of convergence. Both are <span class="math notranslate nohighlight">\(10^{-12}\)</span> by default. Although this
is fine for HI, the RISM iterations have little chances to reach the
error of <span class="math notranslate nohighlight">\(10^{-12}\)</span>. This number is suggested to be
<span class="math notranslate nohighlight">\(10^{-7}\)</span> in AMBER RISM.</p></li>
<li><p><strong>-bound-to-ram</strong> or <strong>-ignore-memory-capacity</strong>: by default, the
software will detect the capacity of the physical memory, and will
terminate when the memory is exceeding the physical memory. This
feature can be disabled by <strong>-ignore-memory-capacity</strong>, which will
cause extremely low computational efficiency as well as high risk to
damage your hard disk. Ignore the memory capacity check only when you
know what you are doing.</p></li>
</ul>
<p>Other advanced options can be seen in Sec. [sec:param.options]</p>
</div>
<div class="section" id="commands-and-command-queue">
<h2>Commands and command queue<a class="headerlink" href="#commands-and-command-queue" title="Permalink to this headline">¶</a></h2>
<p>The command forms a command queue, and will be performed one by one
after the frames are read from the trajectory file. The command(s)
specified in <strong>-cmd</strong> will be added to the command queue. You can use to
relocate the current command instead of inserting it to the end of the
queue, e.g. “-cmd report&#64;5:energy” will insert “-cmd report:energy” to
the 5th command (the command queue begins with 1). b and e can be used
to force the command to runs before handling of any frame or after
handling all frames, e.g. “-cmd report:rdf” will report the RDF at each
frame, and “-cmd report&#64;end:rdf” will report the overall RDF after all
frames have been processed.</p>
<p>Followings are some basic commands for setting closures, running HI/RISM
calculations, and generating reports or output files of the output
results:</p>
<ul class="simple">
<li><p><strong>build-ff</strong>: <strong>-cmd build-ff</strong>: force to rebuild the forcefield. The
forcefield is built automatically with <strong>rism</strong> or hshi, and this
command is used only when you need to do something without perfoming
RISM or HI.</p></li>
<li><p><strong>rism</strong>: <strong>-cmd rism</strong>,step=100: perform 3DRISM with specified
number of maximum steps and the closure(s) defined in the <strong>closure</strong>
command before.</p></li>
<li><p><strong>ssoz</strong>: <strong>-cmd ssoz</strong>,step=100: perform unrenormalized 3DRISM with
specified number of maximum steps and the closure(s) defined in the
<strong>closure</strong> command before. The unrenormalized 3DRISM is the very
original version of 3DRISM, which has big issues in electrostatic
interactions.</p></li>
<li><p><strong>hshi</strong>: <strong>-cmd hshi</strong>,step=100: perform HI with specified number of
maximum steps.</p></li>
<li><p><strong>closure</strong>: <a href="#id5"><span class="problematic" id="id6">**</span></a>-cmd closure=**closure_A[,closure_B,…]: set the
closure(s) for each molecule. Different sites can be calculated with
different closures, and at most 20 closures are allowed to be
specified here. Particularly, all the sovlent sites will use the same
specified closure if only one closure is given here.</p></li>
<li><p><strong>closure-a</strong>: set the closure(s) for each site instead of molecule.</p></li>
<li><p><strong>closure-factor</strong>: <a href="#id7"><span class="problematic" id="id8">**</span></a>-cmd cf=**cf_A[,cf_B,…]: set the extra
parameters that used in closures.</p></li>
<li><p><strong>report</strong>: <strong>-cmd report:**Euv/energy/cuv/rdf: generate a report on
screen (or to -log file). **-cmd report:Euv</strong> will display a brief
report of total energies, while <strong>-cmd report:energy</strong> will display a
detailed report of total energies. <strong>-cmd report:cuv</strong> will display
the total direct correlations, and <strong>-cmd report:rdf</strong> will display
the RDFs if you have defined the RDF groups. In addition, <strong>-cmd
report:energy,cuv</strong> is equivalent to <strong>-cmd report:all</strong>.</p></li>
<li><p><strong>display</strong>: <a href="#id9"><span class="problematic" id="id10">**</span></a>-cmd
display:<a href="#id11"><span class="problematic" id="id12">**</span></a>lj/coul/Euv/energy/cuv/dN/dN0/TS/GGF/rdf: display the
values of the chosen variables</p></li>
<li><p><strong>save</strong>: <strong>-cmd
save:**cmd/lj/coul/cuv/huv/hlr/dd/ddp/nphi/guv/rmin/rdf: save the
specified quantity. **-cmd save:cmd</strong> will save the command line
arguments to the TS4S file, and <strong>-cmd save:guv</strong> will save the
density distributions of each solvent site at each spacial grid to
the TS4S file. <strong>-cmd save:lj,coul,cuv,huv,hlr,dd</strong> will save LJ
potentials, Coulomb potentials, direct correlations, total
correlations, long range total correltations, HI density to the TS4S
file, and <strong>-cmd save:rmin</strong> will save the minimal-to-solute
distances to the TS4S file. Additionally, <strong>-cmd save:rdf</strong> will save
the RDF to the RDF file (which is a text file).</p></li>
<li><p><strong>savee</strong>: mostly the save as <strong>save</strong>. The only difference is that
<strong>savee</strong> will perform saving only when the output TS4S file is
explicitly specified, while <strong>save</strong> will use an default filename if
the output TS4S file is not explicitly specified.</p></li>
</ul>
<p>Addtionally, some shortcuts can be used to add a bundle of commands.
Don’t use two or more shortcuts, otherwise both the two sets of commands
will be performed.</p>
<ul class="simple">
<li><p><strong>-do-rism-kh</strong> = -cmd closure=kh rism report:energy display:rdf
savee:cmd,guv</p></li>
<li><p><strong>-do-rismhi-d2</strong> = -cmd hshi closure=d2 rism report:energy
display:rdf savee:cmd,guv</p></li>
<li><p><strong>-do-rismhi-kh</strong> = -cmd hshi closure=kh rism report:energy
display:rdf savee:cmd,guv</p></li>
</ul>
</div>
<div class="section" id="other-options">
<h2>Other options<a class="headerlink" href="#other-options" title="Permalink to this headline">¶</a></h2>
<p>Below is a list of major advanced options that can be defined in both
the <strong>[solvent]</strong> section of the solvent setting file or the command
line parameters:</p>
<ul class="simple">
<li><p><strong>-lsa</strong> and <strong>-lsb</strong> for HI: the two parameters, <span class="math notranslate nohighlight">\(A\)</span> and
<span class="math notranslate nohighlight">\(B\)</span> of the liquid equation of state [cite]. <span class="math notranslate nohighlight">\(B\)</span> is
automatically computed, and <span class="math notranslate nohighlight">\(A\)</span> can be defined with -lse-a or
<strong>-lsa</strong>. The recommended values of <span class="math notranslate nohighlight">\(A\)</span> can be seen from
previous experimental measurements [cite].</p></li>
<li><p><strong>-theta</strong> for HI: define the energy cutoff (in kT), above which the
regions are treated as hard cores or no solvent regions. The default
cutoff is 5 kT.</p></li>
<li><p><strong>-Coulomb</strong>: the preprocessing algorithm of the Coulomb interactions
in HI and RISM. Can be: none (=-Coulomb), dielect, or YukawaFFT.</p></li>
<li><p><strong>-Yukawa</strong> 0.5: the same as <strong>-Coulomb YukawaFFT</strong> 0.5. 0.5 here is
the characteristic length (unit: nm) of the exponential function of
the Yukawa potential. The Debye length of the homogeneous liquid will
be used if the characteristic length is not specified. The dielectric
constant for the Yukawa potential is defined in <strong>-dielect-y</strong>.</p></li>
<li><p><strong>-ccutoff</strong>: the cutoff of closures, which is used in the closures
like PLHNC.</p></li>
<li><p><strong>-rb</strong> or <strong>-Bohr-radius</strong>: the minimal raiuds of an atom. By
default it is 0.052911 (nm).</p></li>
<li><p><strong>-sd</strong> or <strong>-significant-digits</strong>: the significant digits in the
TS4S files, can be “float”, “double” or a number (significant digits
in decimal)</p></li>
<li><p><strong>-closure-enhance-level</strong> 1 or <strong>-enhance-closure</strong> 1: scale down
the changes of SCF iterations with <span class="math notranslate nohighlight">\((1+h^2)^{\alpha/2}\)</span>, where
<span class="math notranslate nohighlight">\(\alpha\)</span> is the closure enhancement level. This option greatly
helps the convergence of the self-consistent-field iterations and is
turned on by default. Use <strong>-no-closure-enhance</strong> to turn this
feature off.</p></li>
<li><p><strong>-bounded-to-ram</strong>: don’t exceed the physical memory capacity when
using memory. This feature is on by default, and use
<strong>-ignore-memory-capacity</strong> to turn this feature off.</p></li>
<li><p><strong>-xvv-extend</strong> 0: extend the <strong>gvv</strong> of solvent. If the input gvv
contains the RDFs of <span class="math notranslate nohighlight">\(2\)</span> nm, then -xvv-extend 5 will extend it
to <span class="math notranslate nohighlight">\(10\)</span> nm by filling the extended regions with <span class="math notranslate nohighlight">\(1\)</span>. This
option is helpful when you <strong>gvv</strong> is poor, but don’t expect too
much.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Prof. Xuhui Huang

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>